<!--
  Generated template for the ObservationsPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <header [title]="'headings.observations'|translate" [hideBack]="false">

  </header>
</ion-header>



<ion-content>
  <ion-refresher slot="fixed" (ionRefresh)="refresh($event)" *ngIf="enableRefresh">
    <ion-refresher-content pullingIcon="arrow-dropdown" pullingText="Pull to refresh" refreshingSpinner="circles"
      refreshingText="Refreshing...">
    </ion-refresher-content>
  </ion-refresher>
  <div *ngFor="let program of programs; let i = index">
      <!-- <h3 padding class="bold">Program - {{program.name}} ({{program.externalId}})</h3> -->

  <ion-card>

    <ion-item-group *ngFor="let assessment of program?.assessments; let j = index" >
      <ion-item-divider color="light">
        <!-- <h4 > {{assessment.name}}</h4> -->
      <h4  class="bold"  text-wrap>Program - {{program.name}} ({{program.externalId}})</h4>

      </ion-item-divider>
      <ion-item *ngFor="let school of assessment.schools; let k = index" text-wrap>
          <!-- <h3>{{assessment.type}} </h3> -->
        <div class="_flex-box" >
          <div style="flex:1" 
            (click)="school?.downloaded ? goToEcm(school._id,school?.name ) : getAssessmentDetails(i, j,k) ">
            {{school.name}} </div>
          <ion-icon name="cloud-download" class="downloadIcon" (click)="getAssessmentDetails(i, j, k)"
            *ngIf="!school?.downloaded"></ion-icon>
          <ion-icon name="more" class="menuIcon" (click)="openMenu($event,i,j,k)" *ngIf="school?.downloaded"></ion-icon>

          <!-- <ion-icon name="cloud-done" color="primary" class="downloadIcon downloadedIcon" *ngIf="assessment?.downloaded"
            (click)="goToEcm(assessment.id, assessment?.name)"></ion-icon> -->
        </div>
      </ion-item>
    </ion-item-group>

  </ion-card>
</div>

  <div class="_flex-box msgContainer" *ngIf="!programs?.length">No Observations</div>
</ion-content>

<ion-footer no-shadow>
  <ion-toolbar class="_toolbar-background-md" position="bottom">
    <ion-row>
      <ion-col>
        <button ion-button full (click)="refresh()" class="btnText">
          <ion-icon name="refresh" margin-right></ion-icon>
          {{'buttons.refresh' | translate}}
        </button>
      </ion-col>
    </ion-row>
  </ion-toolbar>
</ion-footer>





