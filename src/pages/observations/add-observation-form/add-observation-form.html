<ion-header>
  <header [title]="'headings.addObservation'|translate" [hideBack]="false" [showClose]="false" [disableNetwork]="true"
    [showMenu]="false">
  </header>
</ion-header>

<ion-content padding-top>
  <ion-stepper [mode]="'horizontal'" #stepper (selectIndexChange)="selectChange($event)">

    <ion-step label="Type" >
      <ion-list radio-group [(ngModel)]="entityType">
        <ion-label>{{'ionLabel.selectObservationType' | translate}}</ion-label>
        <ion-item *ngFor="let type of entityTypeData">
          <ion-label text-capitalize>{{type.name}}</ion-label>
          <ion-radio value="{{type._id}}"></ion-radio>
        </ion-item>
      </ion-list>
    </ion-step>


    <ion-step label="Solution">
      <div class="fixBox" *ngIf="listOfSolution">
          <ion-label>{{'ionLabel.selectSolution' | translate}}</ion-label>
          <ion-searchbar debounce="500" type="3" (ionClear)="clearSolution()" autofocus (ionChange)="searchSolution($event)" placeholder="{{'message.startSearchSolution' | translate}}"></ion-searchbar>
         <ion-list margin-top *ngFor="let frameWork of listOfSolution">
          <ion-item (click)="selectSolution(frameWork._id)" [ngClass]="{'active': frameWork._id === selectedFrameWork}">
            <ion-icon name="list-box" item-start></ion-icon>
            <h2>{{frameWork.name}} </h2>
            <p>{{frameWork.description}}</p>
            <button ion-button clear item-end (click)="showDetails(frameWork)">View</button>
          </ion-item>
        </ion-list>
      </div>
      <ion-infinite-scroll [enabled]="!(this.listOfSolution?.length === totalCount) && this.listOfSolution?.length > 0" (ionInfinite)="doInfinite($event)">
        <ion-infinite-scroll-content loadingSpinner="bubbles" loadingText="Loading more data...">
        </ion-infinite-scroll-content>
    </ion-infinite-scroll>
    </ion-step>


    <ion-step label="Details">
        <!-- <h4>Observation Details</h4> -->
      
      <div class="fixBox">
        <dynamic-form [formFields]="addObservationData" [form]="addObservationForm"></dynamic-form>
        
      </div>
    </ion-step>
  </ion-stepper>
  <!-- <ion-infinite-scroll [enabled]="!(this.listOfSolution?.length === totalCount) && this.listOfSolution?.length > 0" (ionInfinite)="doInfinite($event)">
    <ion-infinite-scroll-content loadingSpinner="bubbles" loadingText="Loading more data...">
    </ion-infinite-scroll-content>
</ion-infinite-scroll> -->
</ion-content>



<ion-footer no-shadow>
  <ion-toolbar class="_toolbar-background-md" position="bottom">
    <ion-row>
      <ion-col *ngIf="selectedIndex !== 0">
        <button ion-button full (click)="stepper1.previousStep()" class="btnText">
          {{'buttons.previous' | translate}}
        </button>
      </ion-col>
      <ion-col *ngIf="selectedIndex === 0">

      </ion-col>
      <ion-col *ngIf="selectedIndex !== 2">
        <button ion-button full
          (click)=" doAction() ; selectedIndex === 0  ? entityType ? stepper1.nextStep() : tmpFunc() : selectedFrameWork ? stepper1.nextStep() : tmpFunc() "
          class="btnText"
          >
          {{'buttons.next' | translate}} 
        </button>
      </ion-col>
      
      <ion-col *ngIf="selectedIndex === 2">
          <button ion-button full (click)="saveDraft() ; saveDraftType = 'normal'" class="btnText">
            <!-- <ion-icon name="pause" margin-right></ion-icon> -->
            {{'buttons.save' | translate}}
          </button>
        </ion-col>
        
        <!-- <ion-col *ngIf="selectedIndex === 2">
            <button ion-button full (click)="addObservation()" class="btnText" >
              <ion-icon name="cloud-upload" margin-right></ion-icon>
              {{'buttons.add' | translate}}
            </button>
          </ion-col> -->
    </ion-row>
  </ion-toolbar>
</ion-footer>