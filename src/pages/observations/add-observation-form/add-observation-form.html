<!--
  Generated template for the AddObservationFormPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <header [title]="'headings.addObservation'|translate" [hideBack]="false" [showClose]="false" [disableNetwork]="true"
    [showMenu]="false" >
  </header>
  <!-- <header [title]="'headings.observations'|translate" [hideBack]="true" [showClose]="true" [disableNetwork]="true"> -->

</ion-header>





<ion-content padding-top *ngIf="addObservationForm">

  <ion-stepper [mode]="'horizontal'" #stepper (selectIndexChange)="selectChange($event)">


    <ion-step label="Details"  >
      <div  class="fixBox">
        <dynamic-form [formFields]="addObservationData" [form]="addObservationForm"></dynamic-form>
      </div>
     
    </ion-step>


    <ion-step label="Schools">
      
      <!-- <div *ngIf="schoolList && schools" class="fixBox">
          <selectable-list [selectableList]="schoolList" [itemsPerShot]="index" [list]="schools"></selectable-list>
      </div> -->
      <ion-row>
      
        <ion-col >

        </ion-col>
        <ion-col >
        <button ion-button full (click)="openSchoolListmodal()" class="btnText">
          {{'buttons.addSchools' | translate}}
        </button>
      </ion-col>
     
    </ion-row>

    <div *ngIf="selectedSchools.length > 0 ; else noSchools ">
        <!-- <selectable-list [selectableList]="selectedSchools" [itemsPerShot]="selectedSchools.length" [list]="schools"></selectable-list> -->
        <ion-list *ngFor="let school of selectedSchools">
            <ion-item-divider color="light">
                <h3 class="headerText">
                    <span class="_wrap-text">{{school.name}}</span> 
                  </h3>
          </ion-item-divider>
        </ion-list>
    </div>
    <ng-template #noSchools>
      <p class="_flex-box _justify-content-center">No Schools Selected.</p>
    </ng-template>
    </ion-step>


    <ion-step label="Solutions">

      <div class="fixBox" *ngIf="addObservationForm.controls.category.value">
        <span *ngIf="addObservationForm.controls.category.value === 'CO'; else TO">
          <ion-list *ngFor="let frameWork of listOfFrameWork[0]">
            <ion-item (click)="selectSolution(frameWork)" [ngClass]="{'active': frameWork === selectedFrameWork}">
              <ion-icon name="list-box" item-start></ion-icon>
              <h2>{{frameWork.name}} </h2>
              <p>{{frameWork.description}}</p>
              <button ion-button clear item-end (click)="showDetails(frameWork)">View</button>
            </ion-item>
          </ion-list>
        </span>
        <ng-template #TO>
          <ion-list *ngFor="let frameWork of listOfFrameWork[1]">
            <ion-item class="frameWorkList" (click)="selectSolution(frameWork)"
              [ngClass]="{'active': frameWork === selectedFrameWork}">
              <ion-icon name="list-box" item-start></ion-icon>
              <h2 text-wrap>{{frameWork.name}} </h2>
              <p text-wrap>{{frameWork.description}}</p>
              <button ion-button clear item-end (click)="showDetails(frameWork);$event.stopPropagation() ">View</button>
            </ion-item>
          </ion-list>
        </ng-template>
      </div>
       
    </ion-step>
  </ion-stepper>
</ion-content>
<ion-footer no-shadow>
  <ion-toolbar class="_toolbar-background-md" position="bottom">
    <ion-row>
      <ion-col *ngIf="selectedIndex !== 0">
        <button ion-button full  (click)="stepper1.previousStep()" class="btnText">
          <!-- <ion-icon name="md-bookmark" margin-right></ion-icon> -->
          {{'buttons.previous' | translate}}
        </button>
        </ion-col>
        <ion-col *ngIf="selectedIndex === 0">

        </ion-col>
        <ion-col *ngIf="selectedIndex !== 2">
        <button ion-button full (click)="stepper1.nextStep()" class="btnText">
          <!-- <ion-icon name="cloud-upload" margin-right></ion-icon> -->
          {{'buttons.next' | translate}}
        </button>
      </ion-col>
      <ion-col *ngIf="selectedIndex === 2">
          <button ion-button full (click)="addObservation()" class="btnText">
            <ion-icon name="cloud-upload" margin-right></ion-icon>
            {{'buttons.add' | translate}}
          </button>
        </ion-col>
    </ion-row>
  </ion-toolbar>
</ion-footer>

